# dgKeyframe2Chapter
Pegasys社のTMPGEncシリーズで書き出される.keyframeファイルを、mp4chap.exeで利用できる.chapters.txt形式に変換するツールです。
TMPGEncシリーズ上でのチャプター情報（タイムコード）を流用し、簡単なチャプター名を付与したり手動で編集もできます。

随分昔にVB.NET作ったものですが、時々機能追記要望などをいただくので2020年春のコロナ禍のヒマにまかせてC#で再実装してみました。

出力書式は、

```
00:00:00.000 Avant-title
00:03:45:000 Opening
00:05:00:000 A Part
```

のような、HH:MM:SS:FFF形式のタイムコードとチャプター名のペアを1行1件で書き出します。

その他の機能として、
- フレーム部分を000に丸める（大抵Iフレーム単位のスキップ誤差があるので少し手前にする意味合い）
- チャプター数からチャプター名を推測入力
- チャプター名のパターン入力 [New!!]
- 先頭行が0でない場合でも、0秒スタート換算（.keyframeを手動で分割した場合用）
が可能です。

## 自動チャプター名入力
### パターン入力 [New!!]
設定画面から
- 接頭辞
- 連番（0～5桁）
- 接尾辞
を組み合わせて自動生成します。
例えば「チャプター 001」みたいなパターンにする場合、接頭辞を「チャプター 」、桁数を3、接尾辞を空にします。
現状、連番は1始まりのみです。要望があればそれ以外の開始番号指定にも対応するかも知れません。

### 自動推測
一般的なテレビ番組（アニメ）の構成に基づいたチャプター名を自動入力します。
チャプターの数と、アバンタイトルの有無設定を元に推定しています。
間違っていたらプルダウンで修正してください。

### なし
なにも入力しません。ファイル読み込み時に選択されていた場合はすべて空欄になります。
読み込み後に「なし」に切り替えた場合には、（設定済みのチャプター名を消してしまわないよう）なにも起きません。

# 動作要件
- Windows
- .NET Framework 4.8

# ダウンロード
「[Release](https://github.com/do-gugan/dgKeyframe2Chapter/releases)」タブより最新版のzipファイルを取得してください。
